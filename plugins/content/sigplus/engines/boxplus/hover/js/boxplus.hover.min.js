/*
* @file
* @brief    boxplus lightweight window engine on mouse-over
* @author   Levente Hunyadi
* @version  1.3.1
* @remarks  Copyright (C) 2009-2010 Levente Hunyadi
* @remarks  Licensed under GNU/GPLv3, see http://www.gnu.org/licenses/gpl-3.0.html
* @see      http://hunyadi.info.hu/projects/boxplus
*/
if(typeof(__jQuery__)=="undefined"){var __jQuery__=jQuery}(function(d){function h(t,s){var r=parseInt(t.css(s));return isNaN(r)?t[s]():r}d.fn.safeWidth=function(){return h(this,"width")};d.fn.safeHeight=function(){return h(this,"height")};var j;var b;var l;var e;var p;var f=d(window);var g=new Image();var c;d(function(){d("body").append('<div id="boxplus-dialog" class="hide"><div id="boxplus-viewer" class="hide"></div><div id="boxplus-caption" class="hide"><p class="title"></p><p class="caption"></p></div></div>');j=d("#boxplus-dialog");b=j.safeWidth();l=j.safeHeight();e=d("#boxplus-viewer");p=d("#boxplus-caption")});d.fn.dimensions=function(){return{width:parseInt(this.css("width")),height:parseInt(this.css("height"))}};d.fn.boxplusHover=function(){d(this).each(function(){d(this).hover(k,m)})};d.fn.boxplusHoverGallery=function(){d("li",this).each(function(){var r=d("a:has(img)",this).eq(0);if(r){r.boxplusHover()}})};function i(t,I){t+=j.outerWidth(true)-parseInt(j.css("width"));I+=j.outerHeight(true)-parseInt(j.css("height"));var s=d("img:first",c);var J=s.offset();var z=J.left-f.scrollLeft();var u=J.top-f.scrollTop();var r=s.outerWidth();var C=s.outerHeight();var E=[z+r+t-f.width(),u+C+I-f.height(),t-z];var D=-1;var B=Infinity;for(var A in E){if(E[A]<B){D=A;B=E[A]}}var H=(f.width()-t)/2;var G=(f.height()-I)/2;var w=20;var v=[z+r+w,H,z-t-w];var F=[G,u+C+w,G];return{left:f.scrollLeft()+v[D],top:f.scrollTop()+F[D]}}function a(r,s){return d.extend({width:r,height:s},i(r,s))}function k(r){c=d(r.currentTarget);j.css(i(b,l));j.css({width:b,height:l});g.onload=n;g.src=c.attr("href");j.removeClass("hide")}function m(){j.stop();j.addClass("hide");e.addClass("hide");p.addClass("hide")}function n(){var r=g.width;var s=g.height;e.css({width:r,height:s});e.css("background-image",'url("'+c.attr("href")+'")');var t=a(r,s);j.css({width:b,height:l,left:t.left+(t.width-b)/2,top:t.top+(t.height-l)/2});j.animate(t,"fast","swing",o)}function o(){e.removeClass("hide");var r=d("img:first",c);var t=r.attr("alt");var s=c.attr("title");if(t&&t!=s){d(".title",p).html(t)}else{d(".title",p).empty()}d(".caption",p).html(s);if(t||s){var u=j.dimensions();u.height+=p.outerHeight(true);j.animate(u,"slow","swing",q)}}function q(){p.removeClass("hide")}})(__jQuery__);