/*
* @file
* @brief    boxplus mouse-over image caption engine
* @author   Levente Hunyadi
* @version  1.3.1
* @remarks  Copyright (C) 2009-2010 Levente Hunyadi
* @remarks  Licensed under GNU/GPLv3, see http://www.gnu.org/licenses/gpl-3.0.html
* @see      http://hunyadi.info.hu/projects/boxplus
*/
if(typeof(__jQuery__)=="undefined"){var __jQuery__=jQuery}(function(b){function a(d){var c=d.parent("a");return c.size()?c.attr("href"):false}b.fn.boxplusCaption=function(h){var i={alwaysOnTop:false,download:a,metadata:false,dialog:false};h=b.extend(i,h);var g=this;var f=g.attr("alt");var c=h.download;var m=h.metadata;var k=h.dialog;var e=c&&c(g);var q=m&&m(g);var j=e||q;if(!f&&!j){return this}var o=g.parent("a").size()?g.parent():g;var d=b('<div class="boxplus-container" />').insertAfter(o);var p=b('<div class="boxplus-overlaycaption boxplus-hidden"></div>').appendTo(d).html(f);if(j){var l=b('<div class="boxplus-buttons" />');if(e){b('<div class="boxplus-download" />').appendTo(l).click(function(){window.location.href=e;return false})}if(q&&k){k(b('<div class="boxplus-metadata" />').appendTo(l),g)}p.append(l)}var n=d.parent().mouseenter(function(){var r=g.offset();d.css({width:g.outerWidth(),height:g.outerHeight()}).offset(r).offset(r);p.removeClass("boxplus-hidden")});if(!h.alwaysOnTop){n.mouseleave(function(){p.addClass("boxplus-hidden")})}n.mouseenter().mouseleave();return this};b.fn.boxplusCaptionGallery=function(c){b("li img:first-child",this).each(function(){b(this).boxplusCaption(c)});return this}})(__jQuery__);